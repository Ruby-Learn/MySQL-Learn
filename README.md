## MySQL 구조
![img.png](img/mysql-architecture1.png)  
![img.png](img/mysql-architecture2.png)  
*MySQL 서버는 크데 MySQL 엔진과 스토리지 엔진으로 구분된다.*

### MySQL 엔진
- 클라이언트로부터의 접속 및 쿼리 요청을 처리하는 커넥션 핸들러와 SQL Parser 및 전처리기,
쿼리의 최적화된 실행을 위한 SQL Optimizer 로 구성

### 스토리지 엔진
- 요청된 SQL 문장을 분석하거나 최적화
- 실제 데이터를 디스크 스토리지에 저장하거나 디스크 스토리지로부터 데이터를 읽어오는 역할을 수행

### 핸들러 API
- MySQL 엔진의 쿼리 실행기에서 데이터를 쓰거나 읽을 때 각 스토리지 엔진에 쓰기 또는 읽기를 요청하고,
이러한 요청들에 사용되는 API
- 스토리지 엔진은 핸들러 API 를 통해 MySQL 엔진과 데이터를 주고 받음

### MySQL 쓰레딩 구조
![img.png](img/threading-architecture.png)  
*MySQL 서버는 쓰레드 기반으로 작동하며, 크게 포그라운드 쓰레드와 백그라운드 쓰레드로 구분된다.*
- Foreground Thread
  - 사용자 쓰레드. 각 클라이언트 사용자가 요청하는 쿼리 문장을 처리
  - 클라이언트 사용자가 작업을 마치고 커넥션을 종료하면 해당 커넥션을 쓰레드 캐시에 반납한다.
    - 쓰레드 캐시에 이미 일정 개수 이상의 대기 중인 쓰레드가 있다면 쓰레드 캐시에 넣지 않고 종료시킴으로서
    쓰레드 캐시에는 일정 개수의 쓰레드를 유지시킨다.
- Background Thread
  - 로그를 디스크로 기록
  - 데이터를 버퍼로 읽음
  - 잠금이나 데드락을 모니터링